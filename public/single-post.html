<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Post Details</title>
    <link rel="stylesheet" href="style.css">
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const postId = new URLSearchParams(window.location.search).get('id');
            if (!postId) {
                document.body.innerHTML = '<h1>Post ID is missing!</h1>';
                return;
            }

            try {
                const response = await fetch(`/posts/${postId}`);
                if (!response.ok) {
                    document.body.innerHTML = '<h1>Post not found!</h1>';
                    return;
                }
                const post = await response.json();

                document.getElementById('title').innerText = post.title;
                document.getElementById('caption').innerText = post.caption;
                document.getElementById('image').src = post.image;
                document.getElementById('category').innerText = post.category;
                document.getElementById('theme').innerText = post.theme;
                document.getElementById('rooms').innerText = post.rooms;
                document.getElementById('room_category').innerText = post.room_category;
                document.getElementById('created_at').innerText = new Date(post.created_at).toLocaleString();
            } catch (error) {
                console.error('Error fetching post data:', error);
                document.body.innerHTML = '<h1>There was an error fetching the post data.</h1>';
            }
        });
    </script>
</head>
<body>
    <nav>
        <div class="nav-left">
            <img src="logo-dark.png" alt="ReVibe Logo" id="nav-logo">
            <h1>ReVibe Forum</h1>
        </div>
        <div class="nav-right">
            <a href="/main"><button id="home-button">Home</button></a>
            <div class="dropdown">
                <img src="default-profile.png" alt="Profile Picture" id="profile-pic">
                <span id="profile-username" data-user-id="1">Username</span>
                <div class="dropdown-content">
                    <p id="settings-button">Settings</p>
                    <p id="logout-button">Logout</p>
                </div>
            </div>
            <button id="theme-switch">Switch Theme</button>
        </div>
    </nav>

    <h1 id="title"></h1>
    <img id="image" alt="Post Image">
    <p id="caption"></p>
    <p>Category: <span id="category"></span></p>
    <p>Theme: <span id="theme"></span></p>
    <p>Rooms: <span id="rooms"></span></p>
    <p>Room Category: <span id="room_category"></span></p>
    <p>Created at: <span id="created_at"></span></p>
    <a href="/">Back to Home</a>
</body>
</html>
